{% extends 'Posts/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
    <section class="move">
        <div id="carouselExampleCaptions" class="carousel slide" data-interval="10000" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                {% for pt in post %}
                    <div class="carousel-item {% if forloop.first %} active {% endif %}">
                        <img src="{{ pt.image.url }}" class="d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <a href="{% url 'details' pt.pk %}">{{ pt.title }}</a>
                            <h4>{{ pt.description|safe|truncatewords:10 }}</h4>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-target="#carouselExampleCaptions" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-target="#carouselExampleCaptions" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </button>
        </div>
    </section>

    <!-- Categories -->

    <section class="categories">
        <div class="content-container">
            <div class="row">
                <div class="col-md-3">
                    <div class="ct-scroll">
                        <div class="match-scroll-navbar">
                            <nav class="nv">
                                <h4>Browse Categories</h4>
                                <hr>
                                <ul>
                                    <li>
                                        <h4>All</h4>
                                        <span>{{ post_count }}</span>
                                    </li>
                                    <li>
                                        <h4>Lifestyle</h4>
                                        <span>{{ lifestyle }}</span>
                                    </li>
                                    <li>
                                        <h4>Fashion</h4>
                                        <span>{{ fashion }}</span>
                                    </li>
                                    <li>
                                        <h4>Technology</h4>
                                        <span>{{ tech }}</span>
                                    </li>
                                    <li>
                                        <h4>Gaming</h4>
                                        <span>{{ gaming }}</span>
                                    </li>
                                    <li>
                                        <h4>Art</h4>
                                        <span>{{ art }}</span>
                                    </li>
                                    <li>
                                        <h4>Nature</h4>
                                        <span>{{ nature }}</span>
                                    </li>
                                    <li>
                                        <h4>Travel</h4>
                                        <span>{{ travel }}</span>
                                    </li>
                                    <li>
                                        <h4>Health</h4>
                                        <span>{{ health }}</span>
                                    </li>
                                    <li>
                                        <h4>Food</h4>
                                        <span>{{ food }}</span>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>

                    <div class="posts">
                        <h5>Top Posts</h5>
                        <ol>
                            {% for p in top %}
                                <li>
                                    <a href="{% url 'details' p.id %}">{{ p.title }}</a><br>
                                    <span>{{ p.author }} - {{ p.date_created|date:"d F Y" }}</span>
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-12 header">
                            <h5>Latest Posts</h5>
                        </div>
                    </div>

                    <div class="row row-cols-1 row-col-md-3">
                        {% for nw in news %}
                            <div class="col-md-3 mb-4">
                                <div class="card">
                                    <img src="{{ nw.image.url }}" class="card-img-top" alt="...">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ nw.category }}</h5>
                                        <a href="{% url 'details' nw.pk %}" class="card-text">{{ nw.title|truncatewords:6 }}</a>
                                        <span>{{ nw.description|safe |truncatewords:12 }}<span>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="col-md-1">
                    
                </div>
            </div>
        </div>
    </section>
{% endblock %}